{"ast":null,"code":"import _slicedToArray from\"/Users/bocasio-MAC/Desktop/sigmacapital/fattmerchant/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/Users/bocasio-MAC/Desktop/sigmacapital/fattmerchant/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React,{useEffect}from'react';import FattMerchantApi from'./apis/FattMerchantApi';import{makeStyles}from'@material-ui/core/styles';import MaterialTable from'material-table';import Grid from'@material-ui/core/Grid';import CircularProgress from'@material-ui/core/CircularProgress';import'./App.css';import AddIcon from'@material-ui/icons/Add';import Table from'@material-ui/core/Table';import Typography from'@material-ui/core/Typography';import TableBody from'@material-ui/core/TableBody';import TableCell from'@material-ui/core/TableCell';import TableHead from'@material-ui/core/TableHead';import TableRow from'@material-ui/core/TableRow';import Paper from'@material-ui/core/Paper';import Button from'@material-ui/core/Button';import Snackbar from'@material-ui/core/Snackbar';import SnackbarContent from'@material-ui/core/SnackbarContent';import CheckCircleIcon from'@material-ui/icons/CheckCircle';import{green}from'@material-ui/core/colors';import clsx from'clsx';import IconButton from'@material-ui/core/IconButton';import CloseIcon from'@material-ui/icons/Close';import RemoveIcon from'@material-ui/icons/Remove';var useStyles=makeStyles(function(theme){return{root:{flexGrow:1},paper:{padding:theme.spacing(2),textAlign:'center',color:theme.palette.text.secondary},detailsRoot:{width:'100%',overflowX:'auto'},table:{minWidth:700},success:{backgroundColor:green[600]},error:{backgroundColor:theme.palette.error.dark},message:{display:'flex',alignItems:'center'},icon:{fontSize:20},iconVariant:{opacity:0.9,marginRight:theme.spacing(1)}};});var TAX_RATE=0.07;function ccyFormat(num){return\"\".concat(num.toFixed(2));}function priceRow(qty,unit){return qty*unit;}function createRow(desc,qty,unit,id){var price=priceRow(qty,unit);return{desc:desc,qty:qty,unit:unit,price:price,id:id};}function subtotal(items){return items.map(function(_ref){var price=_ref.price;return price;}).reduce(function(sum,i){return sum+i;},0);}var variantIcon={success:CheckCircleIcon};function MySnackbarContentWrapper(props){var classes=useStyles();var className=props.className,message=props.message,onClose=props.onClose,variant=props.variant,other=_objectWithoutProperties(props,[\"className\",\"message\",\"onClose\",\"variant\"]);var Icon=variantIcon[variant];return React.createElement(SnackbarContent,Object.assign({className:clsx(classes[variant],className),\"aria-describedby\":\"client-snackbar\",message:React.createElement(\"span\",{id:\"client-snackbar\",className:classes.message},React.createElement(Icon,{className:clsx(classes.icon,classes.iconVariant)}),message),action:[React.createElement(IconButton,{key:\"close\",\"aria-label\":\"close\",color:\"inherit\",onClick:onClose},React.createElement(CloseIcon,{className:classes.icon}))]},other));}var useStyles2=makeStyles(function(theme){return{margin:{margin:theme.spacing(1)}};});function App(){var classes=useStyles();var fattMerchantApi=new FattMerchantApi();var _React$useState=React.useState({data:null,loading:true,error:false,errorMessage:null,rows:[]}),_React$useState2=_slicedToArray(_React$useState,2),state=_React$useState2[0],setState=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),open=_React$useState4[0],setOpen=_React$useState4[1];var handleClose=function handleClose(event,reason){if(reason==='clickaway'){return;}setOpen(false);};useEffect(function(){fattMerchantApi.getCatalogItems().then(function(response){setState({data:response,loading:false,error:false,errorMessage:state.errorMessage,rows:[]});console.log(response);}).catch(function(error){setState({data:null,loading:false,error:true,errorMessage:error,rows:[]});});},[]);if(state.loading){return React.createElement(\"div\",{className:\"App\"},React.createElement(CircularProgress,null));}else if(state.error){return React.createElement(\"div\",{className:\"App\"},React.createElement(\"p\",null,\"An error occurred\"),React.createElement(\"p\",null,state.errorMessage));}var columns=[{title:\"Name\",field:\"item\"},{title:\"Price(USD)\",field:\"price\",type:'numeric'},{title:\"Stock\",field:\"in_stock\"}];var invoiceSubtotal=subtotal(state.rows);var invoiceTaxes=TAX_RATE*invoiceSubtotal;var invoiceTotal=invoiceTaxes+invoiceSubtotal;return React.createElement(\"div\",{className:\"App\"},React.createElement(Snackbar,{anchorOrigin:{vertical:'bottom',horizontal:'left'},open:open,autoHideDuration:6000,onClose:handleClose},React.createElement(MySnackbarContentWrapper,{onClose:handleClose,variant:\"success\",message:\"Invoice Successfully created!\"})),React.createElement(Grid,{container:true,spacing:1},React.createElement(Grid,{item:true,xs:6},React.createElement(MaterialTable,{title:\"Catalog\",columns:columns,data:state.data.data,actions:[{icon:AddIcon,tooltip:'Add Item To Invoice',onClick:function onClick(event,rowData){if(state.rows.length===0){state.rows.push(createRow(rowData.item,1,rowData.price,rowData.id));}else{var found=false;state.rows.map(function(row){if(row.desc===rowData.item){row.qty++;row.price=row.unit*row.qty;found=true;}});if(!found){state.rows.push(createRow(rowData.item,1,rowData.price,rowData.id));}}state.rows.map(function(row){row.price=row.qty*row.unit;});setState({data:state.data,loading:state.loading,error:state.error,errorMessage:state.errorMessage,rows:state.rows});}},{icon:RemoveIcon,tooltip:'Remove Item From Invoice',onClick:function onClick(event,rowData){if(state.rows.length===0){return;}else{var found=false;var index=0;state.rows.map(function(row){if(row.desc===rowData.item){row.qty--;row.price=row.unit*row.qty;found=true;if(row.qty===0){state.rows.splice(index,1);}}index++;});if(!found){return;}}state.rows.map(function(row){row.price=row.qty*row.unit;});setState({data:state.data,loading:state.loading,error:state.error,errorMessage:state.errorMessage,rows:state.rows});}}]})),React.createElement(Grid,{item:true,xs:6},React.createElement(Paper,{className:classes.detailsRoot},React.createElement(Typography,{variant:\"body1\"},\"Invoice\"),React.createElement(Table,{className:classes.table,\"aria-label\":\"spanning table\"},React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableCell,{align:\"center\",colSpan:3},\"Details\"),React.createElement(TableCell,{align:\"right\"},\"Price\")),React.createElement(TableRow,null,React.createElement(TableCell,null,\"Desc\"),React.createElement(TableCell,{align:\"right\"},\"Qty.\"),React.createElement(TableCell,{align:\"right\"},\"Unit\"),React.createElement(TableCell,{align:\"right\"},\"Sum\"))),React.createElement(TableBody,null,state.rows.map(function(row){return React.createElement(TableRow,{key:row.desc},React.createElement(TableCell,null,row.desc),React.createElement(TableCell,{align:\"right\"},row.qty),React.createElement(TableCell,{align:\"right\"},row.unit),React.createElement(TableCell,{align:\"right\"},ccyFormat(row.price)));}),React.createElement(TableRow,null,React.createElement(TableCell,{rowSpan:3}),React.createElement(TableCell,{colSpan:2},\"Subtotal\"),React.createElement(TableCell,{align:\"right\"},ccyFormat(invoiceSubtotal))),React.createElement(TableRow,null,React.createElement(TableCell,null,\"Tax\"),React.createElement(TableCell,{align:\"right\"},\"\".concat((TAX_RATE*100).toFixed(0),\" %\")),React.createElement(TableCell,{align:\"right\"},ccyFormat(invoiceTaxes))),React.createElement(TableRow,null,React.createElement(TableCell,{colSpan:2},\"Total\"),React.createElement(TableCell,{align:\"right\"},ccyFormat(invoiceTotal))))),React.createElement(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:useStyles.submit,onClick:function onClick(){var lineItems=state.rows.map(function(row){return{id:row.id,item:row.desc,quantity:row.qty,price:row.price};});setState({data:state.data,loading:true,error:state.error,errorMessage:state.errorMessage,rows:state.rows});fattMerchantApi.createInvoice({customer_id:\"acdd7dc5-69a4-4d31-9187-67d50007e8d0\",payment_method_id:\"68758ae5-ccde-4f95-9dfa-078590a2f070\",meta:{tax:invoiceTaxes,subtotal:invoiceSubtotal,lineItems:lineItems},total:invoiceTotal,url:\"https://omni.fattmerchant.com/#/bill/\",send_now:false,files:[]}).then(function(){setOpen(true);state.rows=[];setState({data:state.data,loading:state.loading,error:state.error,errorMessage:state.errorMessage,rows:state.rows});});}},\"Create Invoice\")))));}export default App;","map":{"version":3,"sources":["/Users/bocasio-MAC/Desktop/sigmacapital/fattmerchant/src/App.js"],"names":["React","useEffect","FattMerchantApi","makeStyles","MaterialTable","Grid","CircularProgress","AddIcon","Table","Typography","TableBody","TableCell","TableHead","TableRow","Paper","Button","Snackbar","SnackbarContent","CheckCircleIcon","green","clsx","IconButton","CloseIcon","RemoveIcon","useStyles","theme","root","flexGrow","paper","padding","spacing","textAlign","color","palette","text","secondary","detailsRoot","width","overflowX","table","minWidth","success","backgroundColor","error","dark","message","display","alignItems","icon","fontSize","iconVariant","opacity","marginRight","TAX_RATE","ccyFormat","num","toFixed","priceRow","qty","unit","createRow","desc","id","price","subtotal","items","map","reduce","sum","i","variantIcon","MySnackbarContentWrapper","props","classes","className","onClose","variant","other","Icon","useStyles2","margin","App","fattMerchantApi","useState","data","loading","errorMessage","rows","state","setState","open","setOpen","handleClose","event","reason","getCatalogItems","then","response","console","log","catch","columns","title","field","type","invoiceSubtotal","invoiceTaxes","invoiceTotal","vertical","horizontal","tooltip","onClick","rowData","length","push","item","found","row","index","splice","submit","lineItems","quantity","createInvoice","customer_id","payment_method_id","meta","tax","total","url","send_now","files"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport FattMerchantApi from './apis/FattMerchantApi';\nimport { makeStyles } from '@material-ui/core/styles';\nimport MaterialTable from 'material-table';\nimport Grid from '@material-ui/core/Grid';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport './App.css';\nimport AddIcon from '@material-ui/icons/Add';\nimport Table from '@material-ui/core/Table';\nimport Typography from '@material-ui/core/Typography';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport { green } from '@material-ui/core/colors';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport RemoveIcon from '@material-ui/icons/Remove';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary,\n  },\n  detailsRoot: {\n    width: '100%',\n    overflowX: 'auto',\n  },\n  table: {\n    minWidth: 700,\n  },\n  success: {\n    backgroundColor: green[600],\n  },\n  error: {\n    backgroundColor: theme.palette.error.dark,\n  },\n  message: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n  icon: {\n    fontSize: 20,\n  },\n  iconVariant: {\n    opacity: 0.9,\n    marginRight: theme.spacing(1),\n  },\n}));\n\nconst TAX_RATE = 0.07;\n\nfunction ccyFormat(num) {\n  return `${num.toFixed(2)}`;\n}\n\nfunction priceRow(qty, unit) {\n  return qty * unit;\n}\n\nfunction createRow(desc, qty, unit, id) {\n  const price = priceRow(qty, unit);\n  return { desc, qty, unit, price, id };\n}\n\nfunction subtotal(items) {\n  return items.map(({ price }) => price).reduce((sum, i) => sum + i, 0);\n}\n\nconst variantIcon = {\n  success: CheckCircleIcon,\n};\n\nfunction MySnackbarContentWrapper(props) {\n  const classes = useStyles();\n  const { className, message, onClose, variant, ...other } = props;\n  const Icon = variantIcon[variant];\n\n  return (\n    <SnackbarContent\n      className={clsx(classes[variant], className)}\n      aria-describedby=\"client-snackbar\"\n      message={\n        <span id=\"client-snackbar\" className={classes.message}>\n          <Icon className={clsx(classes.icon, classes.iconVariant)} />\n          {message}\n        </span>\n      }\n      action={[\n        <IconButton key=\"close\" aria-label=\"close\" color=\"inherit\" onClick={onClose}>\n          <CloseIcon className={classes.icon} />\n        </IconButton>,\n      ]}\n      {...other}\n    />\n  );\n}\n\nMySnackbarContentWrapper.propTypes = {\n  className: PropTypes.string,\n  message: PropTypes.string,\n  onClose: PropTypes.func,\n  variant: PropTypes.oneOf(['error', 'info', 'success', 'warning']).isRequired,\n};\n\nconst useStyles2 = makeStyles(theme => ({\n  margin: {\n    margin: theme.spacing(1),\n  },\n}));\n\nfunction App() {\n  const classes = useStyles();\n  const fattMerchantApi = new FattMerchantApi();\n  const [state, setState] = React.useState({\n    data: null,\n    loading: true,\n    error: false,\n    errorMessage: null,\n    rows: []\n  })\n\n  const [open, setOpen] = React.useState(false);\n\n  const handleClose = (event, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n\n    setOpen(false);\n  };\n\n  useEffect(() => {\n    fattMerchantApi.getCatalogItems()\n    .then(response => {\n      setState({\n        data: response,\n        loading: false,\n        error: false,\n        errorMessage: state.errorMessage,\n        rows: []\n      })\n      console.log(response)\n    }).catch(error => {\n      setState({\n        data: null,\n        loading: false,\n        error: true,\n        errorMessage: error,\n        rows: []\n      })\n    })\n  }, []);\n\n  if (state.loading) {\n    return (\n      <div className=\"App\">\n        <CircularProgress />\n      </div>\n    )\n  } else if (state.error) {\n    return (\n      <div className=\"App\">\n        <p>An error occurred</p>\n        <p>{state.errorMessage}</p>\n      </div>\n    )\n  }\n\n  const columns = [\n    {title: \"Name\", field: \"item\"},\n    {title: \"Price(USD)\", field: \"price\", type: 'numeric'},\n    {title: \"Stock\", field: \"in_stock\"}\n  ]\n  const invoiceSubtotal = subtotal(state.rows);\n  const invoiceTaxes = TAX_RATE * invoiceSubtotal;\n  const invoiceTotal = invoiceTaxes + invoiceSubtotal;\n  return (\n    <div className=\"App\">\n      <Snackbar\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        open={open}\n        autoHideDuration={6000}\n        onClose={handleClose}\n      >\n        <MySnackbarContentWrapper\n          onClose={handleClose}\n          variant=\"success\"\n          message=\"Invoice Successfully created!\"\n        />\n      </Snackbar>\n      <Grid container spacing={1}>\n        <Grid item xs={6}>\n          <MaterialTable\n            title=\"Catalog\"\n            columns={columns}\n            data={state.data.data}\n            actions={[\n              {\n                  icon: AddIcon,\n                  tooltip: 'Add Item To Invoice',\n                  onClick: (event, rowData) => {\n                    if (state.rows.length === 0){\n                      state.rows.push(createRow(rowData.item, 1, rowData.price, rowData.id));\n                    } else {\n                      let found = false\n                      state.rows.map(row => {\n                        if (row.desc === rowData.item) {\n                          row.qty++;\n                          row.price = row.unit * row.qty\n                          found = true\n                        }\n                      })\n                      if (!found) {\n                        state.rows.push(createRow(rowData.item, 1, rowData.price, rowData.id))\n                      }\n                    }\n                    state.rows.map(row => {\n                      row.price = row.qty * row.unit\n                    })\n                    setState({\n                      data: state.data,\n                      loading: state.loading,\n                      error: state.error,\n                      errorMessage: state.errorMessage,\n                      rows: state.rows\n                    })\n                  }\n              },\n              {\n                icon: RemoveIcon,\n                tooltip: 'Remove Item From Invoice',\n                onClick: (event, rowData) => {\n                  if (state.rows.length === 0){\n                    return\n                  } else {\n                    let found = false\n                    let index = 0;\n                    state.rows.map(row => {\n                      if (row.desc === rowData.item) {\n                        row.qty--;\n                        row.price = row.unit * row.qty\n                        found = true\n                        if (row.qty === 0){\n                          state.rows.splice(index, 1);\n                        }\n                      }\n                      index++;\n                    })\n                    if (!found) {\n                      return\n                    }\n                  }\n                  state.rows.map(row => {\n                    row.price = row.qty * row.unit\n                  })\n                  setState({\n                    data: state.data,\n                    loading: state.loading,\n                    error: state.error,\n                    errorMessage: state.errorMessage,\n                    rows: state.rows\n                  })\n                }\n            }\n          ]}\n            />\n        </Grid>\n        <Grid item xs={6}>\n          <Paper className={classes.detailsRoot}>\n            <Typography variant=\"body1\">Invoice</Typography>\n            <Table className={classes.table} aria-label=\"spanning table\">\n              <TableHead>\n                <TableRow>\n                  <TableCell align=\"center\" colSpan={3}>\n                    Details\n                  </TableCell>\n                  <TableCell align=\"right\">Price</TableCell>\n                </TableRow>\n                <TableRow>\n                  <TableCell>Desc</TableCell>\n                  <TableCell align=\"right\">Qty.</TableCell>\n                  <TableCell align=\"right\">Unit</TableCell>\n                  <TableCell align=\"right\">Sum</TableCell>\n                </TableRow>\n              </TableHead>  \n              <TableBody>\n                {state.rows.map(row => (\n                  <TableRow key={row.desc}>\n                    <TableCell>{row.desc}</TableCell>\n                    <TableCell align=\"right\">{row.qty}</TableCell>\n                    <TableCell align=\"right\">{row.unit}</TableCell>\n                    <TableCell align=\"right\">{ccyFormat(row.price)}</TableCell>\n                  </TableRow>\n                ))}\n                <TableRow>\n                  <TableCell rowSpan={3} />\n                  <TableCell colSpan={2}>Subtotal</TableCell>\n                  <TableCell align=\"right\">{ccyFormat(invoiceSubtotal)}</TableCell>\n                </TableRow>\n                <TableRow>\n                  <TableCell>Tax</TableCell>\n                  <TableCell align=\"right\">{`${(TAX_RATE * 100).toFixed(0)} %`}</TableCell>\n                  <TableCell align=\"right\">{ccyFormat(invoiceTaxes)}</TableCell>\n                </TableRow>\n                <TableRow>\n                  <TableCell colSpan={2}>Total</TableCell>\n                  <TableCell align=\"right\">{ccyFormat(invoiceTotal)}</TableCell>\n                </TableRow>\n              </TableBody>\n            </Table>\n            <Button\n                type=\"submit\"\n                variant=\"contained\"\n                color=\"primary\"\n                className={useStyles.submit}\n                onClick={() => {\n                  const lineItems = state.rows.map(row => {\n                    return {\n                      id: row.id,\n                      item: row.desc,\n                      quantity: row.qty,\n                      price: row.price\n                    }\n                  })\n                  setState({\n                    data: state.data,\n                    loading: true,\n                    error: state.error,\n                    errorMessage: state.errorMessage,\n                    rows: state.rows\n                  })\n                  fattMerchantApi.createInvoice(\n                    {\n                      customer_id: \"acdd7dc5-69a4-4d31-9187-67d50007e8d0\",\n                      payment_method_id: \"68758ae5-ccde-4f95-9dfa-078590a2f070\",\n                      meta: {\n                        tax: invoiceTaxes,\n                        subtotal: invoiceSubtotal,\n                        lineItems: lineItems\n                      },\n                      total: invoiceTotal,\n                      url: \"https://omni.fattmerchant.com/#/bill/\",\n                      send_now: false,\n                      files: []\n                    }\n                  ).then(() => {\n                    setOpen(true)\n                    state.rows = []\n                    setState({\n                      data: state.data,\n                      loading: state.loading,\n                      error: state.error,\n                      errorMessage: state.errorMessage,\n                      rows: state.rows\n                    })\n                  })\n                }}\n            >\n                Create Invoice\n            </Button>\n          </Paper>\n        </Grid>\n      </Grid>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}