(this["webpackJsonpfattmerchant-app"]=this["webpackJsonpfattmerchant-app"]||[]).push([[0],{202:function(e,a,t){e.exports=t(301)},207:function(e,a,t){},299:function(e,a,t){},301:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(16),o=t.n(c),i=(t(207),t(38)),l=t(13),s=t(85),u=t.n(s),m=t(132),d=t(37),p=t(26),g=function(){function e(){Object(d.a)(this,e),this.baseEndpoint="https://tzk4q7s8fk.execute-api.us-east-1.amazonaws.com/dev/store"}return Object(p.a)(e,[{key:"getCatalogItems",value:function(){var e=Object(m.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/catalog",e.abrupt("return",fetch(this.baseEndpoint+"/catalog",{method:"GET",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){throw e})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createInvoice",value:function(){var e=Object(m.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/checkout/invoice",e.abrupt("return",fetch(this.baseEndpoint+"/checkout/invoice",{method:"POST",credentials:"same-origin",body:JSON.stringify(a),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){throw e})));case 2:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()}]),e}(),f=t(344),h=t(177),E=t.n(h),w=t(345),v=t(142),b=(t(299),t(185)),y=t.n(b),k=t(170),j=t(109),C=t(149),O=t(144),x=t(168),I=t(150),N=t(105),S=t(163),M=t(348),q=t(347),A=t(183),T=t.n(A),_=t(346),z=t(2),D=t(143),R=t(184),F=t.n(R),J=t(186),P=t.n(J),W=Object(f.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},detailsRoot:{width:"100%",overflowX:"auto"},table:{minWidth:700},success:{backgroundColor:_.a[600]},error:{backgroundColor:e.palette.error.dark},message:{display:"flex",alignItems:"center"},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)}}})),B=.07;function G(e){return"".concat(e.toFixed(2))}function U(e,a,t,n){return{desc:e,qty:a,unit:t,price:function(e,a){return e*a}(a,t),id:n}}var V={success:T.a};function H(e){var a=W(),t=e.className,n=e.message,c=e.onClose,o=e.variant,i=Object(l.a)(e,["className","message","onClose","variant"]),s=V[o];return r.a.createElement(q.a,Object.assign({className:Object(z.a)(a[o],t),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:a.message},r.a.createElement(s,{className:Object(z.a)(a.icon,a.iconVariant)}),n),action:[r.a.createElement(D.a,{key:"close","aria-label":"close",color:"inherit",onClick:c},r.a.createElement(F.a,{className:a.icon}))]},i))}Object(f.a)((function(e){return{margin:{margin:e.spacing(1)}}}));var Q=function(){var e=W(),a=new g,t=r.a.useState({data:null,loading:!0,error:!1,errorMessage:null,rows:[]}),c=Object(i.a)(t,2),o=c[0],l=c[1],s=r.a.useState(!1),u=Object(i.a)(s,2),m=u[0],d=u[1],p=function(e,a){"clickaway"!==a&&d(!1)};if(Object(n.useEffect)((function(){a.getCatalogItems().then((function(e){l({data:e,loading:!1,error:!1,errorMessage:o.errorMessage,rows:[]}),console.log(e)})).catch((function(e){l({data:null,loading:!1,error:!0,errorMessage:e,rows:[]})}))}),[]),o.loading)return r.a.createElement("div",{className:"App"},r.a.createElement(v.a,null));if(o.error)return r.a.createElement("div",{className:"App"},r.a.createElement("p",null,"An error occurred"),r.a.createElement("p",null,o.errorMessage));var f=o.rows.map((function(e){return e.price})).reduce((function(e,a){return e+a}),0),h=B*f,b=h+f;return r.a.createElement("div",{className:"App"},r.a.createElement(M.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:m,autoHideDuration:6e3,onClose:p},r.a.createElement(H,{onClose:p,variant:"success",message:"Invoice Successfully created!"})),r.a.createElement(w.a,{container:!0,spacing:1},r.a.createElement(w.a,{item:!0,xs:6},r.a.createElement(E.a,{title:"Catalog",columns:[{title:"Name",field:"item"},{title:"Price(USD)",field:"price",type:"numeric"},{title:"Stock",field:"in_stock"}],data:o.data.data,actions:[{icon:y.a,tooltip:"Add Item To Invoice",onClick:function(e,a){if(0===o.rows.length)o.rows.push(U(a.item,1,a.price,a.id));else{var t=!1;o.rows.map((function(e){e.desc===a.item&&(e.qty++,e.price=e.unit*e.qty,t=!0)})),t||o.rows.push(U(a.item,1,a.price,a.id))}o.rows.map((function(e){e.price=e.qty*e.unit})),l({data:o.data,loading:o.loading,error:o.error,errorMessage:o.errorMessage,rows:o.rows})}},{icon:P.a,tooltip:"Remove Item From Invoice",onClick:function(e,a){if(0!==o.rows.length){var t=!1,n=0;o.rows.map((function(e){e.desc===a.item&&(e.qty--,e.price=e.unit*e.qty,t=!0,0===e.qty&&o.rows.splice(n,1)),n++})),t&&(o.rows.map((function(e){e.price=e.qty*e.unit})),l({data:o.data,loading:o.loading,error:o.error,errorMessage:o.errorMessage,rows:o.rows}))}}}]})),r.a.createElement(w.a,{item:!0,xs:6},r.a.createElement(N.a,{className:e.detailsRoot},r.a.createElement(j.a,{variant:"body1"},"Invoice"),r.a.createElement(k.a,{className:e.table,"aria-label":"spanning table"},r.a.createElement(x.a,null,r.a.createElement(I.a,null,r.a.createElement(O.a,{align:"center",colSpan:3},"Details"),r.a.createElement(O.a,{align:"right"},"Price")),r.a.createElement(I.a,null,r.a.createElement(O.a,null,"Desc"),r.a.createElement(O.a,{align:"right"},"Qty."),r.a.createElement(O.a,{align:"right"},"Unit"),r.a.createElement(O.a,{align:"right"},"Sum"))),r.a.createElement(C.a,null,o.rows.map((function(e){return r.a.createElement(I.a,{key:e.desc},r.a.createElement(O.a,null,e.desc),r.a.createElement(O.a,{align:"right"},e.qty),r.a.createElement(O.a,{align:"right"},e.unit),r.a.createElement(O.a,{align:"right"},G(e.price)))})),r.a.createElement(I.a,null,r.a.createElement(O.a,{rowSpan:3}),r.a.createElement(O.a,{colSpan:2},"Subtotal"),r.a.createElement(O.a,{align:"right"},G(f))),r.a.createElement(I.a,null,r.a.createElement(O.a,null,"Tax"),r.a.createElement(O.a,{align:"right"},"".concat((100*B).toFixed(0)," %")),r.a.createElement(O.a,{align:"right"},G(h))),r.a.createElement(I.a,null,r.a.createElement(O.a,{colSpan:2},"Total"),r.a.createElement(O.a,{align:"right"},G(b))))),r.a.createElement(S.a,{type:"submit",variant:"contained",color:"primary",className:W.submit,onClick:function(){var e=o.rows.map((function(e){return{id:e.id,item:e.desc,quantity:e.qty,price:e.price}}));l({data:o.data,loading:!0,error:o.error,errorMessage:o.errorMessage,rows:o.rows}),a.createInvoice({customer_id:"acdd7dc5-69a4-4d31-9187-67d50007e8d0",payment_method_id:"68758ae5-ccde-4f95-9dfa-078590a2f070",meta:{tax:h,subtotal:f,lineItems:e},total:b,url:"https://omni.fattmerchant.com/#/bill/",send_now:!1,files:[]}).then((function(){d(!0),o.rows=[],l({data:o.data,loading:o.loading,error:o.error,errorMessage:o.errorMessage,rows:o.rows})}))}},"Create Invoice")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[202,1,2]]]);
//# sourceMappingURL=main.8de1f71e.chunk.js.map